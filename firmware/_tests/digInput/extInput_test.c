/* ************************************************************************** */
/* ************************************************************************** */
/* Section: Included Files                                                    */
/* ************************************************************************** */
/* ************************************************************************** */
#include <stdint.h>

#include "log.h"
#include "io_control.h"
#include "extInput_test.h"

/* ************************************************************************** */
/* ************************************************************************** */
/* Section: Constants                                                         */
/* ************************************************************************** */
/* ************************************************************************** */


/* ************************************************************************** */
/* ************************************************************************** */
/* Section: Data types & Definitions                                          */
/* ************************************************************************** */
/* ************************************************************************** */


/* ************************************************************************** */
/* ************************************************************************** */
/* Section: Global data & variables                                           */
/* ************************************************************************** */
/* ************************************************************************** */

/* ************************************************************************** */
/* ************************************************************************** */
/* Section: Callback Functions                                                */
/* ************************************************************************** */

/* ************************************************************************** */
static void cb (t_IO_INPUT_ID *id, t_IO_INPUT_STATES *state)
{
  switch (*state)
    {
    case IO_INPUT_STATE_HIGH:
      _l ("(EXTERNAL INPUT) (%d) LOW\n", (*id) + 1); //PIC receive high whereas IO pin is low
      break;
    case IO_INPUT_STATE_LOW:
      _l ("(EXTERNAL INPUT) (%d) HIGH\n", (*id) + 1);
      break;
    default: break;
    }
}

/* ************************************************************************** */
/* ************************************************************************** */
/* Section: Local Functions                                                   */
/* ************************************************************************** */
/* ************************************************************************** */


/* ************************************************************************** */
/* ************************************************************************** */
/* Section: Interface Functions                                               */
/* ************************************************************************** */

/* ************************************************************************** */
void external_input_init (void)
{
  t_IO_INPUT_ID i;

  for (i = 0; i < IO_INPUT_MAX; i++) io_input_register_callback (i, cb);

}

void external_input_task (void)
{
  asm ("NOP");  
}

/* ************************************************************** End of File */
